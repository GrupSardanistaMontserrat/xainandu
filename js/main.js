function canviarInici() {
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "block";
    inici.classList.remove("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarBlau() {
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "block";
    blau.classList.remove("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarGroc() {
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "block";
    groc.classList.remove("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarVermell() {
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "block";
    vermell.classList.remove("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarVerd() 
{
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "block";
    verd.classList.remove("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarJocsdelaPau() 
{
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "block";
    jocs.classList.remove("d-none");
    arbre.style.display = "none";
    arbre.classList.add("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-white");
    li_jocs.classList.remove("text-secondary");
    li_arbre.classList.add("text-secondary");
    li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}

function canviarArbre() 
{
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    inici.style.display = "none";
    inici.classList.add("d-none");
    blau.style.display = "none";
    blau.classList.add("d-none");
    groc.style.display = "none";
    groc.classList.add("d-none");
    vermell.style.display = "none";
    vermell.classList.add("d-none");
    verd.style.display = "none";
    verd.classList.add("d-none");
    jocs.style.display = "none";
    jocs.classList.add("d-none");
    arbre.style.display = "block";
    arbre.classList.remove("d-none");
    memory.style.display = "none";
    memory.classList.add("d-none");

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.remove("d-none");


    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary");
    li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-white");
    li_arbre.classList.remove("text-secondary");
    li_memory.classList.add("text-secondary");
    li_memory.classList.remove("text-white");
}





// JOC MEMORY
function canviarMemory() {
    let inici = document.getElementById("pagina_inici");
    let blau = document.getElementById("pagina_blau");
    let groc = document.getElementById("pagina_groc");
    let vermell = document.getElementById("pagina_vermell");
    let verd = document.getElementById("pagina_verd");
    let jocs = document.getElementById("pagina_jocs_de_la_pau");
    let arbre = document.getElementById("pagina_arbre");
    let memory = document.getElementById("pagina_memory");

    // Oculta totes les seccions
    inici.style.display = "none"; inici.classList.add("d-none");
    blau.style.display = "none"; blau.classList.add("d-none");
    groc.style.display = "none"; groc.classList.add("d-none");
    vermell.style.display = "none"; vermell.classList.add("d-none");
    verd.style.display = "none"; verd.classList.add("d-none");
    jocs.style.display = "none"; jocs.classList.add("d-none");
    arbre.style.display = "none"; arbre.classList.add("d-none");

    // Mostra només la pàgina del joc de memòria
    memory.style.display = "block"; memory.classList.remove("d-none");

    // Oculta imatge de fons si cal
    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    // Actualitza menú actiu
    let li_jocs = document.getElementById("li_jocs");
    let li_arbre = document.getElementById("li_arbre");
    let li_memory = document.getElementById("li_memory");

    li_jocs.classList.add("text-secondary"); li_jocs.classList.remove("text-white");
    li_arbre.classList.add("text-secondary"); li_arbre.classList.remove("text-white");
    li_memory.classList.add("text-white"); li_memory.classList.remove("text-secondary");

    iniciarMemory();
}

function mostrarSeccio(seccioId, botoActiuId, seccions, botons) {
    // Mostra només la secció activa
    seccions.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            const mostrar = (id === seccioId);
            element.style.display = mostrar ? "block" : "none";
            element.classList.toggle("d-none", !mostrar);
        }
    });

    let imatge_arbre = document.getElementById("imatgeArbre");
    imatge_arbre.classList.add("d-none");

    // Actualitza els estils del menú
    botons.forEach(id => {
        const boto = document.getElementById(id);
        if (boto) {
            boto.classList.remove("text-white", "text-secondary");
            boto.classList.add(id === botoActiuId ? "text-white" : "text-secondary");
        }
    });
}

let cartesGirades = [];
let bloquejat = false;
const imatges = ["img/memory/marc.JPG", "img/martini.jpeg", 
    "img/memory/mossen.jpg", "img/nana.jpeg", "img/pombeta.jpeg", "img/ramon.jpeg", "img/memory/gsm.png", "img/memory/juny.png", 
    "img/memory/triptic.png", "img/caps.png"];

function iniciarMemory() {
    const cartes = [...imatges, ...imatges].sort(() => 0.5 - Math.random());
    const container = document.getElementById("memory-game");
    container.innerHTML = '';
    cartesGirades = [];
    bloquejat = false;

    cartes.forEach((src, index) => {
        const carta = document.createElement("div");
        carta.classList.add("col", "memory-card", "border", "bg-light", "p-3");
        carta.dataset.icon = src;
        carta.dataset.index = index;
        carta.style.cursor = "pointer";
        carta.innerHTML = `<img src="img/question.png" alt="?" class="img-fluid" style="max-height: 80px;">`; // cara oculta
        carta.onclick = () => girarCarta(carta);
        container.appendChild(carta);
    });

    document.getElementById("memory-status").textContent = '';
}


function girarCarta(carta) {
    if (bloquejat || carta.classList.contains("matched")) return;

    const icon = carta.dataset.icon;
    carta.innerHTML = `<img src="${icon}" alt="imatge" class="img-fluid" style="max-height: 80px;">`;
    cartesGirades.push(carta);

    if (cartesGirades.length === 2) {
        bloquejat = true;
        const [c1, c2] = cartesGirades;

        if (c1.dataset.icon === c2.dataset.icon && c1.dataset.index !== c2.dataset.index) {
            c1.classList.add("matched", "bg-success");
            c2.classList.add("matched", "bg-success");

            // Esperem una mica abans de desbloquejar
            setTimeout(() => {
                cartesGirades = [];
                bloquejat = false;

                // Comprovem si el joc ha acabat
                const totalCartes = document.querySelectorAll(".memory-card").length;
                const cartesCorrectes = document.querySelectorAll(".memory-card.matched").length;

                if (totalCartes === cartesCorrectes) {
                    document.getElementById("memory-status").textContent = "🎉 Has completat el joc! Molt bé!";
                }
            }, 300);
        } else {
            setTimeout(() => {
                c1.innerHTML = `<img src="img/question.png" alt="?" class="img-fluid" style="max-height: 80px;">`;
                c2.innerHTML = `<img src="img/question.png" alt="?" class="img-fluid" style="max-height: 80px;">`;
                cartesGirades = [];
                bloquejat = false;
                document.getElementById("memory-status").textContent = '';
            }, 1000);
        }
    }
}


function reiniciarMemory() {
    iniciarMemory();
}

document.addEventListener('DOMContentLoaded', function () {
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});
